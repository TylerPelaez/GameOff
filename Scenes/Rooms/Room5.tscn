[gd_scene load_steps=18 format=3 uid="uid://bt5qyyvtkpjjc"]

[ext_resource type="Script" path="res://Scripts/World.gd" id="1_vr70i"]
[ext_resource type="MeshLibrary" uid="uid://d00ge6jxao8rg" path="res://Art/Environment/MeshLibrary.tres" id="2_r1ifc"]
[ext_resource type="MeshLibrary" uid="uid://dfwblhvr8e5rl" path="res://Art/ShortWallMeshLibrary.tres" id="3_xojaq"]
[ext_resource type="PackedScene" uid="uid://l7wxwtb8sjjg" path="res://Scenes/DraggableBox.tscn" id="4_10lfs"]
[ext_resource type="PackedScene" uid="uid://djdn7qbr08owm" path="res://Scenes/chain.tscn" id="5_8r7d3"]
[ext_resource type="PackedScene" uid="uid://bgo3jvystm51p" path="res://Scenes/Pillar/pillar_one_breakable.tscn" id="6_hsnxc"]
[ext_resource type="PackedScene" uid="uid://dxj0l4f6wfp5k" path="res://Scenes/Pillar/pillar_totally_breakable.tscn" id="7_5f1yi"]
[ext_resource type="PackedScene" uid="uid://btleuhp1kmvle" path="res://Scenes/door.tscn" id="8_sac3l"]
[ext_resource type="PackedScene" path="res://Scenes/InteractableItem3D.tscn" id="9_0rx42"]
[ext_resource type="PackedScene" path="res://Scenes/hallway_light_transition.tscn" id="10_0eckj"]
[ext_resource type="PackedScene" path="res://Scenes/danger_zone.tscn" id="11_d1xqv"]
[ext_resource type="PackedScene" uid="uid://bp2uef1fiex7s" path="res://Scenes/BreakableWalls/BothBreakableWall.tscn" id="12_hcp0u"]
[ext_resource type="PackedScene" path="res://UI/UIController.tscn" id="13_g11vj"]

[sub_resource type="QuadMesh" id="QuadMesh_5spff"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_58wq8"]
data = PackedVector3Array(0.5, -0.5, 0, -0.5, -0.5, 0, 0.5, 0.5, 0, -0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_780s3"]
transparency = 1
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_pymdc"]
material = SubResource("StandardMaterial3D_780s3")
size = Vector2(0.2, 0.2)

[node name="Room" type="Node3D"]
transform = Transform3D(1, -5.49965e-05, 4.14818e-05, 5.49965e-05, 1, -1.13368e-05, -4.14818e-05, 1.13368e-05, 1, -1.2, -0.25, 0.15)
script = ExtResource("1_vr70i")

[node name="GridMap" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.25, 0, 0.25)
mesh_library = ExtResource("2_r1ifc")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(6, 65533, 1441796, 65539, 65529, 0, 65539, 65528, 0, 65540, 65528, 0, 65540, 65527, 0, 65541, 65527, 0, 65542, 65527, 655363, 65541, 65528, 0, 65538, 65529, 0, 65538, 65528, 0, 65538, 65527, 0, 65539, 65527, 0, 65539, 65526, 4, 65540, 65526, 4, 65541, 65526, 4, 65542, 65526, 1441794, 65538, 65526, 4, 65537, 65529, 1048580, 65537, 65528, 1048580, 65537, 65527, 1048580, 65537, 65526, 2, 65542, 65528, 1048578, 65542, 65532, 1441798, 7, 65528, 1441800, 19, 65528, 1048583, 65542, 65529, 1441795, 65542, 65530, 655364, 65541, 65529, 1441792, 65540, 65529, 1441792, 65541, 65530, 655364, 65540, 65530, 655364, 65539, 65530, 655364, 65538, 65530, 655364, 65537, 65530, 1048578, 3, 65530, 655367, 2, 65530, 655367, 5, 65531, 655360, 4, 65531, 655360, 3, 65531, 1441795, 2, 65531, 655362, 4, 65532, 655360, 6, 65532, 1441795, 0, 65528, 1441795, 1, 65529, 1441795, 1, 65532, 1048578, 2, 65532, 655367, 3, 65532, 655362, 3, 65533, 655360, 4, 65533, 655360, 1, 65531, 1441795, 6, 65531, 1441795, 65543, 65528, 1048580, 65543, 65527, 1048580, 131078, 65528, 2, 131079, 65528, 1048577, 131079, 65532, 1048583, 131079, 65531, 1048583, 131079, 65530, 1048583, 131080, 65530, 1048583, 131079, 65529, 1048583, 131079, 65527, 1048583, 131078, 65526, 1441794, 131078, 65525, 655366, 131077, 65525, 0, 131076, 65525, 0, 131075, 65525, 0, 131074, 65525, 655367, 131073, 65526, 2, 131072, 65526, 1441798, 131073, 65527, 1048580, 131073, 65528, 1048580, 131073, 65529, 1048580, 131073, 65530, 1048580, 131073, 65531, 1048583, 131073, 65532, 1048583, 131073, 65533, 1048583, 131072, 65533, 1441798, 131078, 65533, 655366, 131079, 65533, 1048582, 65543, 65533, 1048582, 65537, 65533, 1048582, 65536, 65532, 1441799, 65536, 65531, 1441799, 0, 65531, 1441795, 65543, 65530, 1048580, 65543, 65531, 1048580, 6, 65530, 655364, 5, 65530, 655364, 4, 65530, 655364, 131078, 65529, 5, 196614, 65528, 0, 131078, 65530, 0, 131077, 65530, 0, 131077, 65529, 0, 131077, 65528, 0, 131077, 65527, 0, 131077, 65526, 4, 131078, 65527, 0, 131076, 65526, 4, 131075, 65526, 4, 131075, 65527, 0, 131074, 65526, 0, 131074, 65530, 0, 131075, 65530, 0, 131076, 65530, 0, 131076, 65529, 0, 131076, 65528, 0, 131076, 65527, 0, 131075, 65528, 0, 131075, 65529, 0, 131074, 65529, 0, 131074, 65528, 0, 131074, 65527, 0, 196614, 65526, 1441798, 196614, 65525, 655366, 196609, 65526, 6, 196608, 65526, 1441798, 196613, 65525, 655367, 196612, 65525, 655367, 196611, 65525, 655367, 196610, 65525, 655367, 196615, 65527, 1048583, 196615, 65529, 1048583, 196615, 65530, 1048583, 196609, 65527, 1048583, 196609, 65528, 1048583, 196609, 65529, 1048583, 196609, 65530, 1048583, 196615, 65528, 1048577, 131073, 65534, 7, 6, 0, 7, 5, 0, 7, 3, 0, 7, 2, 0, 7, 1, 0, 7, 0, 0, 7, 4, 0, 1, 0, 65535, 1048578, 6, 65535, 655362, 6, 65534, 1441794, 5, 65535, 1048576, 4, 65535, 1048579, 3, 65535, 1048576, 2, 65535, 1048576, 1, 65535, 1048576, 1, 65534, 1048576, 2, 65534, 1048576, 3, 65534, 1048576, 4, 65534, 2, 5, 65534, 1048576, 0, 65534, 1048576, 2, 65533, 1048576, 1, 65533, 1048576, 0, 65533, 1048576, 5, 65533, 1048576, 5, 65532, 1048576)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMap2" type="GridMap" parent="."]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 0.25, -7.29897e-13, 0.25)
mesh_library = ExtResource("3_xojaq")
cell_size = Vector3(1, 0.333, 1)
data = {
"cells": PackedInt32Array(262163, 65529, 655361, 262164, 65529, 655361, 262166, 65529, 655361, 262165, 65529, 655361, 262163, 65532, 1048577, 262163, 65533, 1048577, 262162, 65533, 1441794, 262162, 65532, 1441794, 262162, 65531, 1441794, 262162, 65530, 1441794, 262144, 65532, 1441792, 262145, 65532, 655360, 262146, 65532, 0, 262147, 65532, 655360, 262148, 65532, 1048576, 262148, 65531, 1048576, 262146, 65531, 1441792, 262145, 65531, 1441792, 262146, 65533, 0, 327681, 65531, 3, 327681, 65532, 3, 327682, 65532, 3, 327683, 65532, 3, 327683, 65531, 3)
}
metadata/_editor_floor_ = Vector3(0, 5, 0)

[node name="Environment" type="Node3D" parent="."]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="OmniLight3D" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 4.68335e-10, 6.22094e-10, -1.0662e-12, 1, 2.28101e-09, 0, 0, 1, 5.45957, 1.66056, 0.76713)
light_color = Color(0.461647, 0.568522, 0.267637, 1)
light_energy = 0.8
light_volumetric_fog_energy = 0.6
shadow_enabled = true
distance_fade_enabled = true

[node name="OmniLight3D2" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 4.68335e-10, 6.22094e-10, -1.0662e-12, 1, 2.28101e-09, 0, 0, 1, 4.77898, 2.96775, -5.96202)
light_color = Color(0.462745, 0.568627, 0.266667, 1)
light_energy = 0.8
light_volumetric_fog_energy = 0.6
shadow_enabled = true
distance_fade_enabled = true

[node name="Floor" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(94.1028, -0.000620166, 9.65473e-05, -0.00907888, 3.59042e-06, 1.00071, -0.00127177, -45.8884, 8.15407e-08, 3.24997, 0.5, 4.75001)
visible = false
mesh = SubResource("QuadMesh_5spff")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Environment/Floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Floor/StaticBody3D"]
transform = Transform3D(1, -3.63798e-12, 6.40182e-14, 0, 1, -5.68434e-14, 2.73941e-11, 0, 1, 0, 0, 0)
shape = SubResource("ConcavePolygonShape3D_58wq8")

[node name="Box4" parent="Environment" node_paths=PackedStringArray("attached_chain") instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 2.99897, 2.6669, -6.00159)
skeleton = NodePath("../..")
attached_to_chain = true
attached_chain = NodePath("../ChainHolder2")

[node name="Box11" parent="Environment" node_paths=PackedStringArray("attached_chain") instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 3.50024, 2.65998, -8.00002)
skeleton = NodePath("../..")
attached_to_chain = true
attached_chain = NodePath("../ChainHolder")

[node name="Box12" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.50022, 2.65993, -7.49997)
skeleton = NodePath("../..")

[node name="Box10" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 3.00018, 2.98004, -6.00003)
skeleton = NodePath("../..")

[node name="Box13" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 1.50002, 1.98015, -3.50008)
skeleton = NodePath("../..")

[node name="Box14" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 1.50005, 2.48015, -3.50009)
skeleton = NodePath("../..")

[node name="Box15" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 1.50008, 2.98015, -3.50009)
skeleton = NodePath("../..")

[node name="Box16" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 3.4999, 0.980058, -1.99999)
skeleton = NodePath("../..")

[node name="Box17" parent="Environment" instance=ExtResource("4_10lfs")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 5.99986, 0.979931, -0.999883)
skeleton = NodePath("../..")

[node name="Pot" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(1, -9.64783e-05, -1.35146e-05, -1.35147e-05, -4.06872e-08, -1, 9.64783e-05, 1, -4.19905e-08, 4.75002, 0.599995, -1.7119)
mesh = SubResource("PlaneMesh_pymdc")
skeleton = NodePath("../..")

[node name="ChainHolder" parent="Environment" node_paths=PackedStringArray("attached") instance=ExtResource("5_8r7d3")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.00044, 2.69819, -6.99986)
max_tiles = 4
attached = NodePath("../Box11")

[node name="PillarOneBreakable" parent="Environment" instance=ExtResource("6_hsnxc")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 5.5, 0.5, -3)

[node name="PillarTotallyBreakable" parent="Environment" instance=ExtResource("7_5f1yi")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 5.50007, 0.499961, -3.99998)

[node name="PillarTotallyBreakable2" parent="Environment" instance=ExtResource("7_5f1yi")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 5.5, 0.75, -4)

[node name="Pot2" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(1, -9.64783e-05, -1.35146e-05, -1.35147e-05, -4.06872e-08, -1, 9.64783e-05, 1, -4.19905e-08, 6.46276, 0.599901, -1.71183)
mesh = SubResource("PlaneMesh_pymdc")
skeleton = NodePath("../..")

[node name="ChainHolder2" parent="Environment" node_paths=PackedStringArray("attached") instance=ExtResource("5_8r7d3")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 2.00042, 2.69829, -6.49994)
max_tiles = 4
attached = NodePath("../Box4")

[node name="Door2" parent="Environment" instance=ExtResource("8_sac3l")]
transform = Transform3D(-4.0789e-08, 4.36597e-05, -1, 6.63333e-05, 1, 4.36597e-05, 1, -6.63333e-05, -4.3583e-08, 7.23292, 3.49986, -7.24959)

[node name="Alter2" parent="Environment" instance=ExtResource("9_0rx42")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 13.2172, 0.699204, -9.83644)
type = 5
_required_key = 1

[node name="Key2" parent="Environment" instance=ExtResource("9_0rx42")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 6.50006, 3.50003, -7.00003)
has_collision = false
_key_id = 1

[node name="R2Door" parent="Environment" instance=ExtResource("8_sac3l")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.74992, 0.500078, 0.259959)
opened_by = 0

[node name="HallwayLightTransition" parent="Environment" instance=ExtResource("10_0eckj")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 8.72368, 0.745129, -6.72066)

[node name="DangerZone" parent="Environment" instance=ExtResource("11_d1xqv")]
danger_min_wait_time_seconds = 5.0
danger_max_wait_time_seconds = 10.0

[node name="BreakableWallBoth" parent="." instance=ExtResource("12_hcp0u")]
transform = Transform3D(1, 5.84671e-12, 2.59856e-11, -5.84671e-12, 1, 0, -2.59856e-11, -1.5193e-22, 1, 5.75, 0.5, -1.75)

[node name="PlayerSpawnPoint" type="Node3D" parent="."]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 5.49999, 0.817121, 1.50022)

[node name="CanvasLayer" parent="." instance=ExtResource("13_g11vj")]
