[gd_scene load_steps=17 format=3 uid="uid://bwsvuye641ojg"]

[ext_resource type="Script" path="res://Scripts/World.gd" id="1_ukafw"]
[ext_resource type="MeshLibrary" uid="uid://d00ge6jxao8rg" path="res://Art/Environment/MeshLibrary.tres" id="2_ppyiy"]
[ext_resource type="MeshLibrary" uid="uid://dfwblhvr8e5rl" path="res://Art/ShortWallMeshLibrary.tres" id="3_4ss30"]
[ext_resource type="PackedScene" uid="uid://l7wxwtb8sjjg" path="res://Scenes/DraggableBox.tscn" id="4_l6gox"]
[ext_resource type="PackedScene" uid="uid://djdn7qbr08owm" path="res://Scenes/chain.tscn" id="5_7gjdv"]
[ext_resource type="PackedScene" uid="uid://btleuhp1kmvle" path="res://Scenes/door.tscn" id="6_j7cop"]
[ext_resource type="PackedScene" path="res://Scenes/InteractableItem3D.tscn" id="7_j4kfl"]
[ext_resource type="PackedScene" path="res://Scenes/hallway_light_transition.tscn" id="8_j0km2"]
[ext_resource type="PackedScene" path="res://Scenes/danger_zone.tscn" id="9_kwc2a"]
[ext_resource type="PackedScene" path="res://UI/UIController.tscn" id="10_aukk0"]
[ext_resource type="PackedScene" path="res://Scenes/Water.tscn" id="11_r5y30"]

[sub_resource type="BoxMesh" id="BoxMesh_nohbw"]

[sub_resource type="QuadMesh" id="QuadMesh_5spff"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_58wq8"]
data = PackedVector3Array(0.5, -0.5, 0, -0.5, -0.5, 0, 0.5, 0.5, 0, -0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_780s3"]
transparency = 1
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_pymdc"]
material = SubResource("StandardMaterial3D_780s3")
size = Vector2(0.2, 0.2)

[node name="Room" type="Node3D"]
transform = Transform3D(1, -5.49965e-05, 4.14818e-05, 5.49965e-05, 1, -1.13368e-05, -4.14818e-05, 1.13368e-05, 1, 0, 0, 0)
script = ExtResource("1_ukafw")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(2.37978, -8.19785e-12, -2.09344e-11, 1.10865e-12, 0.99991, -1.03851e-10, -4.36557e-11, -1.81899e-12, 4.69241, 4.25011, 0.999771, -0.749845)
mesh = SubResource("BoxMesh_nohbw")
skeleton = NodePath("../GridMap")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(0.237992, -1.20459e-10, -2.19044e-11, -3.04613e-13, 1.19995, -4.91673e-11, -4.54747e-12, -1.81899e-12, 2.11148, 5.24993, 1.49977, 4.25019)
mesh = SubResource("BoxMesh_nohbw")
skeleton = NodePath("../GridMap")

[node name="GridMap" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.25, 0, 0.25)
mesh_library = ExtResource("2_ppyiy")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(4, 1, 655360, 5, 1, 655360, 6, 1, 655360, 4, 2, 655360, 5, 2, 655360, 6, 2, 655360, 3, 65534, 2, 7, 65534, 1441794, 4, 65534, 2, 3, 3, 2, 3, 65535, 1048580, 3, 0, 1441796, 3, 1, 1048580, 7, 2, 1441796, 7, 1, 1441796, 7, 0, 1441796, 7, 65535, 1048580, 6, 65533, 1441796, 6, 65534, 1441794, 65541, 65528, 0, 65538, 65529, 0, 65538, 65528, 0, 65538, 65527, 0, 65539, 65527, 0, 65540, 65526, 4, 65541, 65526, 4, 65538, 65526, 4, 65537, 65529, 1048580, 65537, 65528, 1048580, 65537, 65527, 1048580, 65537, 65526, 2, 7, 65530, 1441795, 8, 65531, 655362, 8, 65530, 1441796, 7, 65531, 655365, 65545, 65531, 1048582, 65543, 65533, 655366, 65542, 65533, 655367, 65543, 65534, 1441798, 65543, 65535, 1441799, 65543, 0, 1441799, 65543, 1, 1441799, 65543, 2, 1441799, 65543, 3, 1441799, 65538, 1, 1441799, 65538, 2, 1441799, 65538, 0, 1441799, 65538, 3, 1441800, 65539, 65534, 6, 65539, 65535, 1048583, 65537, 65534, 1441795, 65537, 65535, 8, 65536, 65534, 1441800, 8, 65529, 1, 10, 65527, 655364, 11, 65527, 655364, 12, 65526, 1048579, 12, 65525, 1441796, 12, 65523, 1441796, 12, 65524, 1441796, 12, 65527, 655362, 11, 65526, 655366, 10, 65526, 655367, 11, 65525, 1441799, 11, 65524, 1441799, 13, 65526, 1048583, 9, 65529, 1048583, 12, 65522, 655367, 6, 65530, 1441795, 65541, 65529, 1441792, 65540, 65529, 1441792, 65541, 65530, 1441792, 65540, 65530, 1441792, 65539, 65530, 1441792, 65538, 65530, 1441792, 65537, 65530, 1048580, 1, 65530, 655367, 0, 65528, 1441795, 1, 65529, 1441795, 1, 65533, 1048578, 2, 65533, 655363, 1, 65531, 1048580, 65538, 65534, 1441798, 65540, 65533, 655367, 65541, 65533, 655367, 2, 0, 1441796, 8, 65535, 1048580, 3, 4, 1048578, 5, 4, 655362, 4, 4, 655364, 4, 3, 4, 3, 2, 1048580, 5, 3, 1441794, 6, 4, 655361, 7, 4, 655362, 7, 3, 1441796, 6, 3, 1441792, 65541, 3, 655360, 65541, 4, 655364, 65540, 4, 655364, 65540, 3, 655360, 65539, 3, 655360, 65539, 4, 1048578, 65543, 4, 655366, 65544, 4, 1048582, 65542, 5, 7)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMap2" type="GridMap" parent="."]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 0.25, -7.29897e-13, 0.25)
mesh_library = ExtResource("3_4ss30")
cell_size = Vector3(1, 0.333, 1)
data = {
"cells": PackedInt32Array(262165, 65535, 655361, 262148, 65533, 655360, 262150, 65533, 655360, 262149, 65533, 655360, 262148, 65535, 1441792)
}
metadata/_editor_floor_ = Vector3(0, 4, 0)

[node name="Environment" type="Node3D" parent="."]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="OmniLight3D" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 4.68335e-10, 6.22094e-10, -1.0662e-12, 1, 2.28101e-09, 0, 0, 1, 5.45957, 1.66056, 0.76713)
light_color = Color(0.461647, 0.568522, 0.267637, 1)
light_energy = 0.8
light_volumetric_fog_energy = 0.6
shadow_enabled = true
distance_fade_enabled = true

[node name="OmniLight3D2" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 4.68335e-10, 6.22094e-10, -1.0662e-12, 1, 2.28101e-09, 0, 0, 1, 4.77898, 2.96775, -5.96202)
light_color = Color(0.462745, 0.568627, 0.266667, 1)
light_energy = 0.8
light_volumetric_fog_energy = 0.6
shadow_enabled = true
distance_fade_enabled = true

[node name="Box2" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.5, 2, 4)
skeleton = NodePath("../..")

[node name="Box5" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.5, 2.68, 4)
skeleton = NodePath("../..")

[node name="Box7" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.5, 2.35, 4)
skeleton = NodePath("../..")

[node name="Box8" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.49987, 1.66649, 3.99997)
skeleton = NodePath("../..")

[node name="Box3" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 6.49996, 0.665929, 3.50006)
skeleton = NodePath("../..")

[node name="Box6" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 6.99982, 0.666859, 3.00014)
skeleton = NodePath("../..")

[node name="Floor" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(94.1028, -0.000620166, 9.65473e-05, -0.00907888, 3.59042e-06, 1.00071, -0.00127177, -45.8884, 8.15407e-08, 3.24997, 0.5, 4.75001)
visible = false
mesh = SubResource("QuadMesh_5spff")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Environment/Floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Floor/StaticBody3D"]
transform = Transform3D(1, -3.63798e-12, 6.40182e-14, 0, 1, -5.68434e-14, 2.73941e-11, 0, 1, 0, 0, 0)
shape = SubResource("ConcavePolygonShape3D_58wq8")

[node name="Box4" parent="Environment" node_paths=PackedStringArray("attached_chain") instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 3.99862, 1.66692, 0.998461)
skeleton = NodePath("../..")
attached_to_chain = true
attached_chain = NodePath("../ChainHolder2")

[node name="Box11" parent="Environment" node_paths=PackedStringArray("attached_chain") instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.99983, 1.65999, 0.500061)
skeleton = NodePath("../..")
attached_to_chain = true
attached_chain = NodePath("../ChainHolder")

[node name="Box12" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.5, 3, 4)
skeleton = NodePath("../..")

[node name="Box10" parent="Environment" instance=ExtResource("4_l6gox")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 6.99969, 0.979921, 3.00016)
skeleton = NodePath("../..")

[node name="Pot" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(1, -9.64783e-05, -1.35146e-05, -1.35147e-05, -4.06872e-08, -1, 9.64783e-05, 1, -4.19905e-08, 4.75002, 0.599995, -1.7119)
mesh = SubResource("PlaneMesh_pymdc")
skeleton = NodePath("../..")

[node name="ChainHolder" parent="Environment" node_paths=PackedStringArray("attached") instance=ExtResource("5_7gjdv")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.5001, 1.69824, 0.000169327)
attached = NodePath("../Box11")

[node name="Pot2" type="MeshInstance3D" parent="Environment"]
transform = Transform3D(1, -9.64783e-05, -1.35146e-05, -1.35147e-05, -4.06872e-08, -1, 9.64783e-05, 1, -4.19905e-08, 6.46276, 0.599901, -1.71183)
mesh = SubResource("PlaneMesh_pymdc")
skeleton = NodePath("../..")

[node name="ChainHolder2" parent="Environment" node_paths=PackedStringArray("attached") instance=ExtResource("5_7gjdv")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.50011, 1.69822, -0.499828)
attached = NodePath("../Box4")

[node name="Door2" parent="Environment" node_paths=PackedStringArray("_alter") instance=ExtResource("6_j7cop")]
transform = Transform3D(-4.07454e-08, 4.36597e-05, -1, 6.63333e-05, 1, 4.36597e-05, 1, -6.63333e-05, -4.3583e-08, 7.23267, 0.499879, -5.24956)
_alter = NodePath("../Alter")

[node name="Door3" parent="Environment" node_paths=PackedStringArray("_alter") instance=ExtResource("6_j7cop")]
transform = Transform3D(-4.08181e-08, 4.36597e-05, -1, 6.63333e-05, 1, 4.36597e-05, 1, -6.63333e-05, -4.3583e-08, 5.36261, 1.49034, 4.75035)
_alter = NodePath("../Alter")

[node name="Door4" parent="Environment" node_paths=PackedStringArray("_alter") instance=ExtResource("6_j7cop")]
transform = Transform3D(-4.08581e-08, 4.36597e-05, -1, 6.63333e-05, 1, 4.36597e-05, 1, -6.63333e-05, -4.3583e-08, 5.11517, 1.47612, 4.75034)
_alter = NodePath("../Alter")

[node name="Alter" parent="Environment" instance=ExtResource("7_j4kfl")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 7.00024, 0.699604, -4.74428)
type = 1
_required_key = 1

[node name="Alter2" parent="Environment" instance=ExtResource("7_j4kfl")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 13.2172, 0.699204, -9.83644)
type = 5
_required_key = 1

[node name="Key2" parent="Environment" instance=ExtResource("7_j4kfl")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 4.94158, 0.699851, -4.07021)
has_collision = false
_key_id = 1

[node name="Key3" parent="Environment" instance=ExtResource("7_j4kfl")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 4.44139, 3.19996, 3.92974)
has_collision = false
_key_id = 1

[node name="Key4" parent="Environment" instance=ExtResource("7_j4kfl")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 21.4418, 1.80007, -0.0700209)
has_collision = false
_key_id = 1

[node name="Door" parent="Environment" instance=ExtResource("6_j7cop")]
transform = Transform3D(1, -9.64521e-13, 0, -1.06619e-12, 1, 0, 0, 0, 1, 5.5, 1.833, -1.733)
opened_by = 0

[node name="HallwayLightTransition" parent="Environment" instance=ExtResource("8_j0km2")]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 8.72368, 0.745129, -6.72066)

[node name="DangerZone" parent="Environment" instance=ExtResource("9_kwc2a")]
danger_min_wait_time_seconds = 5.0
danger_max_wait_time_seconds = 10.0

[node name="PlayerSpawnPoint" type="Node3D" parent="."]
transform = Transform3D(1, -9.64506e-13, 0, -1.0662e-12, 1, 0, 0, 0, 1, 5.49999, 0.817121, 1.50022)

[node name="Water" parent="." instance=ExtResource("11_r5y30")]
transform = Transform3D(1.5, 3.72227e-13, -1.63709e-11, -3.4184e-12, 1.5, 4.54747e-13, -1.45519e-11, 0, 1.5, 5.5, -0.240001, 2.43228)

[node name="CanvasLayer" parent="." instance=ExtResource("10_aukk0")]
